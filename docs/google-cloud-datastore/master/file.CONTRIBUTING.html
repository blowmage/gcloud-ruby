---
layout: yard_main
title: "File: CONTRIBUTING - Google"
css: 
  - /docs/css/style.css
  - /docs/css/common.css
  - /css/yard-main.css
js: 
  - /docs/js/app.js
  - /js/yard-main.js
---
<script type="text/javascript" charset="utf-8">
  pathId = "CONTRIBUTING";
  relpath = '';
</script>


<div class="nav_wrap">
  <iframe id="nav" src="file_list.html?1"></iframe>
  <div id="resizer"></div>
</div>

<div id="main" tabindex="-1">
  <div id="header">
    <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: CONTRIBUTING</span>
  
</div>

    <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
    <div class="clear"></div>
  </div>

  <div id="content"><div id='filecontents'><h1>Contributing to Google Cloud Datastore</h1>

<ol>
<li><strong>Sign one of the contributor license agreements below.</strong></li>
<li>Fork the repo, develop and test your code changes.</li>
<li>Send a pull request.</li>
</ol>

<h2>Contributor License Agreements</h2>

<p>Before we can accept your pull requests you&#39;ll need to sign a Contributor
License Agreement (CLA):</p>

<ul>
<li><strong>If you are an individual writing original source code</strong> and <strong>you own the
intellectual property</strong>, then you&#39;ll need to sign an <a href="https://developers.google.com/open-source/cla/individual">individual
CLA</a>.</li>
<li><strong>If you work for a company that wants to allow you to contribute your work</strong>,
then you&#39;ll need to sign a <a href="https://developers.google.com/open-source/cla/corporate">corporate
CLA</a>.</li>
</ul>

<p>You can sign these electronically (just scroll to the bottom). After that, we&#39;ll
be able to accept your pull requests.</p>

<h2>Setup</h2>

<p>In order to use the google-cloud-datastore console and run the project&#39;s tests,
there is a small amount of setup:</p>

<ol>
<li><p>Install Ruby. google-cloud-datastore requires Ruby 2.3+. You may choose to
manage your Ruby and gem installations with <a href="https://rvm.io/">RVM</a>,
<a href="https://github.com/rbenv/rbenv">rbenv</a>, or
<a href="https://github.com/postmodern/chruby">chruby</a>.</p></li>
<li><p>Install <a href="http://bundler.io/">Bundler</a>.</p></li>
</ol>

<pre class="code sh"><code class="sh">   $ gem install bundler
</code></pre>

<ol>
<li>Install the top-level project dependencies.</li>
</ol>

<pre class="code sh"><code class="sh">   $ bundle install
</code></pre>

<ol>
<li>Install the Datastore dependencies.</li>
</ol>

<pre class="code sh"><code class="sh">   $ cd google-cloud-datastore/
   $ bundle exec rake bundleupdate
</code></pre>

<h2>Console</h2>

<p>In order to run code interactively, you can automatically load
google-cloud-datastore and its dependencies in IRB. This requires that your
developer environment has already been configured by following the steps
described in the <a href="file.AUTHENTICATION.html" title="Authentication Guide">Authentication Guide</a>. An IRB console
can be created with:</p>

<pre class="code sh"><code class="sh">$ cd google-cloud-datastore/
$ bundle exec rake console
</code></pre>

<h2>Datastore Tests</h2>

<p>Tests are very important part of google-cloud-datastore. All contributions
should include tests that ensure the contributed code behaves as expected.</p>

<p>To run the unit tests, documentation tests, and code style checks together for a
package:</p>

<pre class="code sh"><code class="sh">$ cd google-cloud-datastore/
$ bundle exec rake ci
</code></pre>

<p>To run the command above, plus all acceptance tests, use <code>rake ci:acceptance</code> or
its handy alias, <code>rake ci:a</code>.</p>

<h3>Datastore Unit Tests</h3>

<p>The project uses the <a href="https://github.com/seattlerb/minitest">minitest</a> library,
including <a href="https://github.com/seattlerb/minitest#specs">specs</a>,
<a href="https://github.com/seattlerb/minitest#mocks">mocks</a> and
<a href="https://github.com/seattlerb/minitest-autotest">minitest-autotest</a>.</p>

<p>To run the Datastore unit tests:</p>

<pre class="code sh"><code class="sh">$ cd google-cloud-datastore/
$ bundle exec rake test
</code></pre>

<h3>Datastore Documentation Tests</h3>

<p>The project tests the code examples in the gem&#39;s
<a href="https://github.com/lsegal/yard">YARD</a>-based documentation.</p>

<p>The example testing functions in a way that is very similar to unit testing, and
in fact the library providing it,
<a href="https://github.com/p0deje/yard-doctest">yard-doctest</a>, is based on the
project&#39;s unit test library, <a href="https://github.com/seattlerb/minitest">minitest</a>.</p>

<p>To run the Datastore documentation tests:</p>

<pre class="code sh"><code class="sh">$ cd google-cloud-datastore/
$ bundle exec rake doctest
</code></pre>

<p>If you add, remove or modify documentation examples when working on a pull
request, you may need to update the setup for the tests. The stubs and mocks
required to run the tests are located in <code>support/doctest_helper.rb</code>. Please
note that much of the setup is matched by the title of the
<a href="http://www.rubydoc.info/gems/yard/file/docs/Tags.md#example"><code>@example</code></a> tag.
If you alter an example&#39;s title, you may encounter breaking tests.</p>

<h3>Datastore Acceptance Tests</h3>

<p>The Datastore acceptance tests interact with the live service API. Follow the
instructions in the <a href="file.AUTHENTICATION.html" title="Authentication guide">Authentication guide</a> for enabling
the Datastore API. Occasionally, some API features may not yet be generally
available, making it difficult for some contributors to successfully run the
entire acceptance test suite. However, please ensure that you do successfully
run acceptance tests for any code areas covered by your pull request.</p>

<p>To run the acceptance tests, first create and configure a project in the Google
Developers Console, as described in the <a href="file.AUTHENTICATION.html" title="Authentication guide">Authentication guide</a>. Be sure to download the JSON KEY file. Make note of the PROJECT_ID and
the KEYFILE location on your system.</p>

<p>Before you can run the Datastore acceptance tests, you must first create indexes
used in the tests.</p>

<h4>Create Datastore indexes</h4>

<p>Install the <a href="https://developers.google.com/cloud/sdk/gcloud/">gcloud command-line
tool</a> and use it to create the
indexes used in the datastore acceptance tests. From the project&#39;s root
directory:</p>

<pre class="code sh"><code class="sh"># Install the app component
$ gcloud components update app

# Set the default project in your env
$ gcloud config set project PROJECT_ID

# Authenticate the gcloud tool with your account
$ gcloud auth login

# Create the indexes
$ gcloud preview datastore create-indexes acceptance/data/
</code></pre>

<h4>Running the Datastore acceptance tests</h4>

<p>To run the Datastore acceptance tests:</p>

<pre class="code sh"><code class="sh">$ cd google-cloud-datastore/
$ bundle exec rake acceptance[\\{my-project-id},\\{/path/to/keyfile.json}]
</code></pre>

<p>Or, if you prefer you can store the values in the <code>GCLOUD_TEST_PROJECT</code> and
<code>GCLOUD_TEST_KEYFILE</code> environment variables:</p>

<pre class="code sh"><code class="sh">$ cd google-cloud-datastore/
$ export GCLOUD_TEST_PROJECT=\\{my-project-id}
$ export GCLOUD_TEST_KEYFILE=\\{/path/to/keyfile.json}
$ bundle exec rake acceptance
</code></pre>

<p>If you want to use a different project and credentials for acceptance tests, you
can use the more specific <code>DATASTORE_TEST_PROJECT</code>  and <code>DATASTORE_TEST_KEYFILE</code>
environment variables:</p>

<pre class="code sh"><code class="sh">$ cd google-cloud-datastore/
$ export DATASTORE_TEST_PROJECT=\\{my-project-id}
$ export DATASTORE_TEST_KEYFILE=\\{/path/to/keyfile.json}
$ bundle exec rake acceptance
</code></pre>

<h2>Coding Style</h2>

<p>Please follow the established coding style in the library. The style is is
largely based on <a href="https://github.com/bbatsov/ruby-style-guide">The Ruby Style
Guide</a> with a few exceptions based
on seattle-style:</p>

<ul>
<li>Avoid parenthesis when possible, including in method definitions.</li>
<li>Always use double quotes strings. (<a href="https://github.com/bbatsov/ruby-style-guide#strings">Option
B</a>)</li>
</ul>

<p>You can check your code against these rules by running Rubocop like so:</p>

<pre class="code sh"><code class="sh">$ cd google-cloud-datastore/
$ bundle exec rake rubocop
</code></pre>

<h2>Code of Conduct</h2>

<p>Please note that this project is released with a Contributor Code of Conduct. By
participating in this project you agree to abide by its terms. See
<a href="file.CODE_OF_CONDUCT.html" title="Code of Conduct">Code of Conduct</a> for more information.</p>
</div></div>

  <div id="footer">
  <ul class="footer-links">
    <li>
      <a href="https://github.com/GoogleCloudPlatform/google-cloud-ruby" title="Google Cloud on Github">
        <img src="/google-cloud-ruby/img/icon-link-github.svg" alt="GitHub icon"> GitHub
      </a>
    </li>
    <li>
      <a href="https://github.com/GoogleCloudPlatform/google-cloud-ruby/issues" title="Google Cloud issues on Github">
        <img src="/google-cloud-ruby/img/icon-link-github.svg" alt="GitHub icon"> Issues
      </a>
    </li>
    <li>
      <a href="http://stackoverflow.com/questions/tagged/google-cloud-ruby" title="Google Cloud on StackOverflow">
      <img src="/google-cloud-ruby/img/icon-link-stackoverflow.svg" alt="StackOverflow icon"> StackOverflow
    </a>
    </li>
    <li>
      <a href="http://rubygems.org/gems/google-cloud" title="Google Cloud on RubyGems">
        <img src="/google-cloud-ruby/img/icon-link-package-manager.svg" alt="RubyGems icon"> RubyGems
      </a>
    </li>
  </ul>

  <p>
    Documentation generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>.
  </p>
</div>

</div>
